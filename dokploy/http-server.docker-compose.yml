services:
  http-server:
    build:
      context: ..
      dockerfile: Dockerfile.http
    networks:
      - logengine.io-network
    restart: unless-stopped
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.logengine-http.rule=Host(`${HTTP_DOMAIN:-api.logengine.io}`)"
      - "traefik.http.routers.logengine-http.entrypoints=websecure"
      - "traefik.http.routers.logengine-http.tls.certResolver=letsencrypt"
      - "traefik.http.services.logengine-http.loadbalancer.server.port=8080"

networks:
  logengine.io-network:
